language: java
jdk:
- oraclejdk8
dist: xenial
script:
- mvn clean test
before_script:
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - chmod +x ./cc-test-reporter
  - ./cc-test-reporter before-build
addons:
  code_climate:
    repo_token:
      secure: "bVHptU3Lmr5XG5ckiNIu80VCY1qxRWL2MQFaPqAiOgt4uwbZtoV9VVH0sBfS78iu9NJJ6P+cjgs4IZgovzcjHAJsxeo0MDtxZMwpjtNjzcx5k4Ky7lHP6aafZWCWSN2uy163UNdUBoRbgEwBzErWn6D7qjYUpt2fySYXuVWmJbDkVqF5onnd002eYA8E8rQdX4JXhT4iD1PJnq0kGaszx77xwCI0/g7oaeDdNUOSmCWYPR+9NH5a7pCZNeNmJdeTw5vQqywJbX4NDq1osYgGv1HyYoQO+1Po1JW8Kx8MWDuokWzqm2M7mqXlfVOINtRQloQQfeN7P0/0IrIh0RArWlY7ymbfAfWqEZZXZkJuX5jJ+EZLufDahjZMkeq503wZYqPyfHeiRGB1YVmsvbPwSD2aS/h1BbDY+xdfAfkZRpLRNjyWrqr52Y/iGJezu37uq2vMMSzU16/cpitdeO0cC9GTUiRSavRCvUyARrLLGBkWZ+Kfco4Qn/laDMFSKHzHsWXRA5P8Y5YoJaQNuXteqMQMMXlvqVREQv+aWJtWGhYmeJgd2f17yQAk4dUe0vg08QVvsShUJ/CiqMnaIcvOigJgr7B3X/s2Tj586fAwGy7L/yDZ6kmxaJXYby5maKGZrQKVV/y+2f6aLoEaT9aj9gUP7qP5EIrnHMfXqG2QsVo="

after_script:
  - ./cc-test-reporter format-coverage -d -t jacoco ./target/jacoco-ut/jacoco.xml
  - ./cc-test-reporter upload-coverage -d

after_success:
- mvn clean test jacoco:report coveralls:report
- bash <(curl -s https://codecov.io/bash)

deploy:
  provider: heroku
  api_key:
    secure: QmULyOiEJROdpDgklBttYLB1mE2QtJQKmc1+ScnnaP0Ed1+PVeYV4XXpx6SXQqVtDtTynJ4Y4WvMj8jeAOt9uH281DbKMLQriayAOYU8Kd2aBHMMNF9KDQm408ysTVB6ua9/xVPnTtXfQS9GgWiBLhCZ2D/NkdRhqiwUtnet6xku0oYU1O42IK74tgQZGfeXXSBuFUXnTwE+U7W+P3D/GcZxjrVG00DihNsDAo0Ethye3fMQhL9d9Vd+ViYFqu2OnZjI7nx6A2Vlm7ULbd1fttuX7c+R7tJ7G9cX1kDze9tVtM6izXjF5j7wXVpb+DPjpbCHnDDBNVVj8WUuCDb2aUlnxDTjWygFp233dOOly29uJZW8UwVRsg2lYW+HjYnygSfvXoGFcFnCehQrsZAWkaIhWN5P9Fk7hwr607oroqTxjvfAWWHa7Qn7+hY/AFokdWIwCfx3kcv3J2g7JuNPTnQCxopwc8SsAJb7c7a0gdrpxrprEC71ivIAHkp2XNicflhpMu3aReUPNzS0oaS4t6sOMa4JST3BM1v5czHuzx/ArgZtMC7wCB7isthBEoYt5egPHwU7FTVP9aJ04BuHhImGakNCoDoEbEfobfu3LutuYNr1/WqUf7GTheCNjNyZ+0wP3vEwOdYxT+Gk+IbrEDTSiOXqz1PeU0N0ZqjKxN4=
  app: send-it-kotlin
  on:
    repo: IEnoobong/send-it-kotlin